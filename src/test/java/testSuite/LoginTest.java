package testSuite;

import config.Session;
import io.qameta.allure.*;
import org.junit.jupiter.api.*;
import pages.LoginPage;
import pages.MainPage;

import javax.management.Descriptor;

import static io.qameta.allure.SeverityLevel.CRITICAL;

public class LoginTest {
    @BeforeEach
    public void openBrowser(){
        Session.getSession().getBrowser().get("https://www.saucedemo.com/");
    }

    @AfterEach
    public void closeBrowser(){
        Session.getSession().getBrowser().quit();
    }

    @Test
    @Order(1)
    @DisplayName("Test de login")
    @Description("Test para validar el inicio de session")
    @Severity(CRITICAL)
    @Owner("UCB")
    public void verifyLoginSuccesfully(){
        LoginPage loginPage = new LoginPage();
        loginPage.fillData("standard_user", "secret_sauce");
        loginPage.selectLogin();

        MainPage mainPage = new MainPage();

        Assertions.assertTrue(mainPage.checkProductList());
    }
}
